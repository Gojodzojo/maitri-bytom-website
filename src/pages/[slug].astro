---
import type { MarkdownInstance } from "astro";
import Article from "../layouts/Article.astro";
import { makeSlug } from "../scripts/makeSlug";

export interface Props {
    markdown: MarkdownInstance<Record<string, any>>;
}

export async function getStaticPaths() {
    const markdowns = [
        ...(await Astro.glob("../content/news/*.md")),
        ...(await Astro.glob("../content/header_pages/*.md")),
    ];

    return markdowns.map((markdown) => ({
        params: {
            slug: makeSlug(markdown.frontmatter),
        },
        props: {
            markdown,
        },
    }));
}

const { markdown } = Astro.props;
---

<Article markdown={markdown} />
