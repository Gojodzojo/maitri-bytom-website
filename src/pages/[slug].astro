---
import Article from "$layouts/Article.astro";
import { makeSlug } from "$scripts/makeSlug";
import type { ArticleMarkdown } from "$scripts/types";

interface Props {
    markdown: ArticleMarkdown;
}

export async function getStaticPaths() {
    const markdowns = [
        ...(await Astro.glob("../markdown/news/*.md")),
        ...(await Astro.glob("../markdown/header_pages/*.md")),
    ] as ArticleMarkdown[];

    return markdowns.map((markdown) => ({
        params: {
            slug: makeSlug(markdown.frontmatter),
        },
        props: {
            markdown,
        },
    }));
}

const { markdown } = Astro.props;
---

<Article markdown={markdown} />
